➜  sql git:(main) ✗ mix sql.bench
Operating System: macOS
CPU Information: Apple M1 Max
Number of Available Cores: 10
Available memory: 64 GB
Elixir 1.20.0-dev
Erlang 28.1
JIT enabled: true

Benchmark suite executing with the following configuration:
warmup: 2 s
time: 5 s
memory time: 2 s
reduction time: 2 s
parallel: 1
inputs: 1..100_000
Estimated total run time: 1 min 28 s

Measured function call overhead as: 0 ns
Benchmarking comptime ecto with input 1..100_000 ...
Benchmarking format with input 1..100_000 ...
Benchmarking iodata with input 1..100_000 ...
Benchmarking lex with input 1..100_000 ...
Benchmarking lex+parse+iodata with input 1..100_000 ...
Benchmarking parse with input 1..100_000 ...
Benchmarking parse/3 with input 1..100_000 ...
Benchmarking runtime ecto with input 1..100_000 ...
Calculating statistics...
Formatting results...

##### With input 1..100_000 #####
Name                       ips        average  deviation         median         99th %
iodata               1627.29 K      614.52 ns  ±3180.45%         542 ns         709 ns
format               1296.69 K      771.20 ns  ±2729.73%         708 ns         917 ns
parse                1049.15 K      953.15 ns  ±1490.08%         875 ns        1083 ns
lex                   830.98 K     1203.40 ns  ±1480.24%        1084 ns        1584 ns
lex+parse+iodata      383.17 K     2609.80 ns   ±478.57%        2500 ns        3125 ns
parse/3               308.89 K     3237.35 ns   ±316.26%        3000 ns        8125 ns
comptime ecto         199.44 K     5014.02 ns   ±156.64%        4791 ns        8958 ns
runtime ecto          185.75 K     5383.47 ns   ±169.39%        5084 ns    13579.31 ns

Comparison:
iodata               1627.29 K
format               1296.69 K - 1.25x slower +156.68 ns
parse                1049.15 K - 1.55x slower +338.63 ns
lex                   830.98 K - 1.96x slower +588.88 ns
lex+parse+iodata      383.17 K - 4.25x slower +1995.29 ns
parse/3               308.89 K - 5.27x slower +2622.83 ns
comptime ecto         199.44 K - 8.16x slower +4399.50 ns
runtime ecto          185.75 K - 8.76x slower +4768.95 ns

Memory usage statistics:

Name                Memory usage
iodata                   1.35 KB
format                   1.42 KB - 1.05x memory usage +0.0703 KB
parse                    2.23 KB - 1.65x memory usage +0.88 KB
lex                      8.63 KB - 6.39x memory usage +7.28 KB
lex+parse+iodata        12.21 KB - 9.03x memory usage +10.86 KB
parse/3                 12.73 KB - 9.42x memory usage +11.38 KB
comptime ecto           17.78 KB - 13.16x memory usage +16.43 KB
runtime ecto            20.21 KB - 14.95x memory usage +18.86 KB

**All measurements for memory usage were the same**

Reduction count statistics:

Name             Reduction count
iodata                       175
format                       188 - 1.07x reduction count +13
parse                        194 - 1.11x reduction count +19
lex                          345 - 1.97x reduction count +170
lex+parse+iodata             714 - 4.08x reduction count +539
parse/3                      763 - 4.36x reduction count +588
comptime ecto               1132 - 6.47x reduction count +957
runtime ecto                1193 - 6.82x reduction count +1018

**All measurements for reduction count were the same**
